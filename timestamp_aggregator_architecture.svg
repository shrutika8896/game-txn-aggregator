<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: %3 Pages: 1 -->
<svg width="545pt" height="512pt"
 viewBox="0.00 0.00 545.00 512.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 508)">
<title>%3</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-508 541,-508 541,4 -4,4"/>
<!-- cron -->
<g id="node1" class="node">
<title>cron</title>
<polygon fill="#e3f2fd" stroke="black" points="374.5,-504 162.5,-504 162.5,-466 374.5,-466 374.5,-504"/>
<text text-anchor="middle" x="268.5" y="-488.8" font-family="Times,serif" font-size="14.00">Job Generator (Cron)</text>
<text text-anchor="middle" x="268.5" y="-473.8" font-family="Times,serif" font-size="14.00">[Creates time&#45;window jobs]</text>
</g>
<!-- w1 -->
<g id="node2" class="node">
<title>w1</title>
<polygon fill="#fff9c4" stroke="black" points="167,-430 0,-430 0,-394 167,-394 167,-430"/>
<text text-anchor="middle" x="83.5" y="-408.3" font-family="Times,serif" font-size="14.00">Aggregator Worker 1</text>
</g>
<!-- cron&#45;&gt;w1 -->
<g id="edge1" class="edge">
<title>cron&#45;&gt;w1</title>
<path fill="none" stroke="black" d="M221.34,-465.9C195.79,-456.09 164.1,-443.93 137.56,-433.75"/>
<polygon fill="black" stroke="black" points="138.62,-430.41 128.03,-430.09 136.11,-436.94 138.62,-430.41"/>
</g>
<!-- w2 -->
<g id="node3" class="node">
<title>w2</title>
<polygon fill="#fff9c4" stroke="black" points="352,-430 185,-430 185,-394 352,-394 352,-430"/>
<text text-anchor="middle" x="268.5" y="-408.3" font-family="Times,serif" font-size="14.00">Aggregator Worker 2</text>
</g>
<!-- cron&#45;&gt;w2 -->
<g id="edge2" class="edge">
<title>cron&#45;&gt;w2</title>
<path fill="none" stroke="black" d="M268.5,-465.72C268.5,-457.97 268.5,-448.79 268.5,-440.27"/>
<polygon fill="black" stroke="black" points="272,-440 268.5,-430 265,-440 272,-440"/>
</g>
<!-- w3 -->
<g id="node4" class="node">
<title>w3</title>
<polygon fill="#fff9c4" stroke="black" points="537,-430 370,-430 370,-394 537,-394 537,-430"/>
<text text-anchor="middle" x="453.5" y="-408.3" font-family="Times,serif" font-size="14.00">Aggregator Worker 3</text>
</g>
<!-- cron&#45;&gt;w3 -->
<g id="edge3" class="edge">
<title>cron&#45;&gt;w3</title>
<path fill="none" stroke="black" d="M315.66,-465.9C341.21,-456.09 372.9,-443.93 399.44,-433.75"/>
<polygon fill="black" stroke="black" points="400.89,-436.94 408.97,-430.09 398.38,-430.41 400.89,-436.94"/>
</g>
<!-- redis -->
<g id="node5" class="node">
<title>redis</title>
<polygon fill="#d1c4e9" stroke="black" points="353.5,-358 183.5,-358 183.5,-305 353.5,-305 353.5,-358"/>
<text text-anchor="middle" x="268.5" y="-342.8" font-family="Times,serif" font-size="14.00">Deduplication (Redis)</text>
<text text-anchor="middle" x="268.5" y="-327.8" font-family="Times,serif" font-size="14.00">• Skip seen txnIds</text>
<text text-anchor="middle" x="268.5" y="-312.8" font-family="Times,serif" font-size="14.00">• Mark new txnIds</text>
</g>
<!-- w1&#45;&gt;redis -->
<g id="edge4" class="edge">
<title>w1&#45;&gt;redis</title>
<path fill="none" stroke="black" d="M123.64,-393.97C145.69,-384.61 173.67,-372.74 199.14,-361.93"/>
<polygon fill="black" stroke="black" points="200.56,-365.13 208.39,-358 197.82,-358.69 200.56,-365.13"/>
</g>
<!-- w2&#45;&gt;redis -->
<g id="edge5" class="edge">
<title>w2&#45;&gt;redis</title>
<path fill="none" stroke="black" d="M268.5,-393.97C268.5,-386.45 268.5,-377.31 268.5,-368.4"/>
<polygon fill="black" stroke="black" points="272,-368.16 268.5,-358.16 265,-368.16 272,-368.16"/>
</g>
<!-- w3&#45;&gt;redis -->
<g id="edge6" class="edge">
<title>w3&#45;&gt;redis</title>
<path fill="none" stroke="black" d="M413.36,-393.97C391.31,-384.61 363.33,-372.74 337.86,-361.93"/>
<polygon fill="black" stroke="black" points="339.18,-358.69 328.61,-358 336.44,-365.13 339.18,-358.69"/>
</g>
<!-- mongo -->
<g id="node6" class="node">
<title>mongo</title>
<polygon fill="#c8e6c9" stroke="black" points="395.5,-269 141.5,-269 141.5,-216 395.5,-216 395.5,-269"/>
<text text-anchor="middle" x="268.5" y="-253.8" font-family="Times,serif" font-size="14.00">MongoDB (Primary)</text>
<text text-anchor="middle" x="268.5" y="-238.8" font-family="Times,serif" font-size="14.00">• Aggregate with $inc/$addToSet</text>
<text text-anchor="middle" x="268.5" y="-223.8" font-family="Times,serif" font-size="14.00">• Idempotent updates</text>
</g>
<!-- redis&#45;&gt;mongo -->
<g id="edge7" class="edge">
<title>redis&#45;&gt;mongo</title>
<path fill="none" stroke="black" d="M268.5,-304.87C268.5,-296.89 268.5,-287.93 268.5,-279.38"/>
<polygon fill="black" stroke="black" points="272,-279.25 268.5,-269.25 265,-279.25 272,-279.25"/>
</g>
<!-- api -->
<g id="node7" class="node">
<title>api</title>
<polygon fill="#b3e5fc" stroke="black" points="309.5,-180 227.5,-180 227.5,-144 309.5,-144 309.5,-180"/>
<text text-anchor="middle" x="268.5" y="-158.3" font-family="Times,serif" font-size="14.00">Read API</text>
</g>
<!-- mongo&#45;&gt;api -->
<g id="edge8" class="edge">
<title>mongo&#45;&gt;api</title>
<path fill="none" stroke="black" d="M268.5,-215.8C268.5,-207.71 268.5,-198.76 268.5,-190.55"/>
<polygon fill="black" stroke="black" points="272,-190.33 268.5,-180.33 265,-190.33 272,-190.33"/>
</g>
<!-- lb -->
<g id="node8" class="node">
<title>lb</title>
<ellipse fill="#ffecb3" stroke="black" cx="268.5" cy="-90" rx="77.19" ry="18"/>
<text text-anchor="middle" x="268.5" y="-86.3" font-family="Times,serif" font-size="14.00">Load Balancer</text>
</g>
<!-- api&#45;&gt;lb -->
<g id="edge9" class="edge">
<title>api&#45;&gt;lb</title>
<path fill="none" stroke="black" d="M268.5,-143.7C268.5,-135.98 268.5,-126.71 268.5,-118.11"/>
<polygon fill="black" stroke="black" points="272,-118.1 268.5,-108.1 265,-118.1 272,-118.1"/>
</g>
<!-- rep1 -->
<g id="node9" class="node">
<title>rep1</title>
<polygon fill="#f0f4c3" stroke="black" points="259.5,-36 101.5,-36 101.5,0 259.5,0 259.5,-36"/>
<text text-anchor="middle" x="180.5" y="-14.3" font-family="Times,serif" font-size="14.00">MongoDB Replica 1</text>
</g>
<!-- lb&#45;&gt;rep1 -->
<g id="edge10" class="edge">
<title>lb&#45;&gt;rep1</title>
<path fill="none" stroke="black" d="M247.65,-72.41C236.5,-63.54 222.57,-52.47 210.3,-42.71"/>
<polygon fill="black" stroke="black" points="212.13,-39.69 202.12,-36.2 207.77,-45.17 212.13,-39.69"/>
</g>
<!-- rep2 -->
<g id="node10" class="node">
<title>rep2</title>
<polygon fill="#f0f4c3" stroke="black" points="435.5,-36 277.5,-36 277.5,0 435.5,0 435.5,-36"/>
<text text-anchor="middle" x="356.5" y="-14.3" font-family="Times,serif" font-size="14.00">MongoDB Replica 2</text>
</g>
<!-- lb&#45;&gt;rep2 -->
<g id="edge11" class="edge">
<title>lb&#45;&gt;rep2</title>
<path fill="none" stroke="black" d="M289.35,-72.41C300.5,-63.54 314.43,-52.47 326.7,-42.71"/>
<polygon fill="black" stroke="black" points="329.23,-45.17 334.88,-36.2 324.87,-39.69 329.23,-45.17"/>
</g>
</g>
</svg>
